(function(){"use strict";var t={3792:function(t,o,e){var n=e(9963),i=e(6252);const s={class:"app"};function d(t,o,e,n,d,l){const a=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(a)])}var l={name:"App"},a=e(3744);const r=(0,a.Z)(l,[["render",d]]);var c=r,u=e(2201),h=e(3577);const p=(0,i._)("h1",null,"Заметки",-1),b={class:"todo-item"},y=(0,i._)("input",{disabled:"",type:"checkbox"},null,-1),g={class:"todo-label"};function m(t,o,e,n,s,d){const l=(0,i.up)("note-item"),a=(0,i.up)("add-notes"),r=(0,i.up)("modal-window"),c=(0,i.up)("notes-list");return(0,i.wg)(),(0,i.iD)("div",null,[p,(0,i._)("button",{onClick:o[0]||(o[0]=t=>s.dialogVisible=!0),class:"btn",style:{"margin-top":"15px"}},"Создать заметку"),(0,i.Wm)(r,{show:s.dialogVisible,"onUpdate:show":o[1]||(o[1]=t=>s.dialogVisible=t)},{default:(0,i.w5)((()=>[s.currentNote?((0,i.wg)(),(0,i.j4)(l,{key:0,note:s.currentNote,style:{"margin-bottom":"10px"}},{todo:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.currentNote.body,(t=>((0,i.wg)(),(0,i.iD)("div",b,[y,(0,i._)("label",g,(0,h.zw)(t.todo),1)])))),256))])),_:1},8,["note"])):(0,i.kq)("",!0),(0,i.Wm)(a,{disabled:d.disabled,onCloseAdded:d.closeModalAdded,onAddNote:d.addNote},null,8,["disabled","onCloseAdded","onAddNote"])])),_:1},8,["show"]),(0,i.Wm)(c,{onDeleteNote:d.deleteNote,notes:s.notes},null,8,["onDeleteNote","notes"])])}e(7658);const f={class:"createNote"},v=(0,i._)("h4",null,"Создание заметки",-1),w={class:"button-content"},k=["disabled"];function _(t,o,e,s,d,l){return(0,i.wg)(),(0,i.iD)("div",f,[v,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>d.title=t),class:"input",type:"text",placeholder:"Название"},null,512),[[n.nr,d.title]]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>d.body.todo=t),onKeydown:o[2]||(o[2]=(0,n.D2)(((...t)=>l.addNote&&l.addNote(...t)),["enter"])),class:"input",type:"text",placeholder:"Содержание"},null,544),[[n.nr,d.body.todo]]),(0,i._)("div",w,[(0,i._)("button",{onClick:o[3]||(o[3]=(...t)=>l.addNote&&l.addNote(...t)),class:"btn"},"Добавить пункт"),(0,i._)("button",{onClick:o[4]||(o[4]=o=>t.$emit("close-added",d.title,d.body.todo)),class:"btn",style:{"margin-top":"15px","margin-left":"5px"},disabled:e.disabled},"Создать заметку",8,k)])])}var N={props:{disabled:{type:Boolean,required:!0}},data(){return{title:"",body:{todo:"",checked:!1}}},methods:{addNote(){this.$emit("add-note",this.title,this.body.todo),this.body.todo=""}}};const D=(0,a.Z)(N,[["render",_]]);var x=D;const C={class:"notes"},E={class:"todo-item"},O=(0,i._)("input",{disabled:"",type:"checkbox"},null,-1),S={class:"todo-label"},I={class:"post-btn"},V=["note","onClick"],$=["onClick"];function T(t,o,e,n,s,d){const l=(0,i.up)("note-item");return(0,i.wg)(),(0,i.iD)("div",C,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.notes,(o=>((0,i.wg)(),(0,i.j4)(l,{style:{"margin-top":"30px"},key:o.id,note:o},{todo:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.body.slice(0,3),(t=>((0,i.wg)(),(0,i.iD)("div",E,[O,(0,i._)("label",S,(0,h.zw)(t.todo),1)])))),256))])),default:(0,i.w5)((()=>[(0,i._)("div",I,[(0,i._)("button",{note:o,onClick:e=>t.$router.push(`/${o.id}`),class:"btn",style:{"background-color":"teal",color:"white","margin-right":"5px"}},"Редактировать",8,V),(0,i._)("button",{onClick:e=>t.$emit("delete-note",o),class:"btn"},"Удалить",8,$)])])),_:2},1032,["note"])))),128))])}const j={class:"note"},A={class:"title"},W={class:"todo"},q={class:"button-content"};function U(t,o,e,n,s,d){return(0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",null,[(0,i._)("div",A,[(0,i._)("strong",null,(0,h.zw)(e.note.title),1)]),(0,i._)("div",W,[(0,i.WI)(t.$slots,"todo")])]),(0,i._)("div",q,[(0,i.WI)(t.$slots,"default")])])}var P={data(){return{activeEdit:null}},props:{note:{type:Object,required:!0}}};const Z=(0,a.Z)(P,[["render",U]]);var K=Z,M={components:{noteItem:K},props:{notes:{type:Array,required:!0}}};const B=(0,a.Z)(M,[["render",T]]);var H=B;function J(t,o,e,s,d,l){return e.show?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"dialog",onClick:o[1]||(o[1]=(...t)=>l.hideDialog&&l.hideDialog(...t))},[(0,i._)("div",{class:"dialog-content",onClick:o[0]||(o[0]=(0,n.iM)((()=>{}),["stop"]))},[(0,i.WI)(t.$slots,"default")])])):(0,i.kq)("",!0)}var Y={props:{show:{type:Boolean,required:!0}},methods:{hideDialog(){this.$emit("update:show",!1)}}};const z=(0,a.Z)(Y,[["render",J]]);var F=z,L={name:"notes",components:{addNotes:x,notesList:H,ModalWindow:F,noteItem:K},data(){return{notes:[],dialogVisible:!1,currentNote:""}},created(){const t=localStorage.getItem("notes");t&&(this.notes=JSON.parse(t))},methods:{addNote(t,o){const e={id:Date.now(),todo:o,checked:!1};if(this.notes.find((o=>o.title===t)))this.notes.filter((o=>o.title===t)).map((t=>{t.body.push(e),localStorage.setItem("notes",JSON.stringify(this.notes))}));else{const o={id:Date.now(),title:t,body:[e]};this.notes.push(o),this.currentNote=o}},closeModalAdded(t,o){this.addNote(t,o),this.dialogVisible=!1,this.currentNote=""},deleteNote(t){this.notes=this.notes.filter((o=>o.id!==t.id))}},computed:{disabled(){return!this.currentNote}},watch:{notes(){localStorage.setItem("notes",JSON.stringify(this.notes))}}};const G=(0,a.Z)(L,[["render",m]]);var Q=G;const R=["onChange","onUpdate:modelValue"],X=["onClick"],tt=["onUpdate:modelValue","onInput","onBlur"],ot={class:"button-add"},et={class:"btns-menu"},nt=["disabled"],it=["disabled"];function st(t,o,e,s,d,l){const a=(0,i.up)("note-item");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(a,{note:d.note},{todo:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(d.note.body,((t,o)=>((0,i.wg)(),(0,i.iD)("div",{key:o,class:"todo-item"},[(0,i.wy)((0,i._)("input",{onChange:o=>l.changeCheck(t),type:"checkbox","onUpdate:modelValue":o=>t.checked=o},null,40,R),[[n.e8,t.checked]]),t.todo!=d.activeEdit?((0,i.wg)(),(0,i.iD)("label",{key:0,class:(0,h.C_)([{line:!0===t.checked},"todo-label"]),onClick:o=>l.editTodo(t)},(0,h.zw)(t.todo),11,X)):(0,i.kq)("",!0),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t=>d.note.body[o].todo=t,onInput:o=>l.editTodo(t),onBlur:o=>l.doneEdit(t)},null,40,tt),[[n.F8,t.todo==d.activeEdit&&d.activeEdit],[n.nr,d.note.body[o].todo]])])))),128))])),default:(0,i.w5)((()=>[(0,i._)("div",ot,[(0,i._)("button",{onClick:o[0]||(o[0]=t=>d.isShow=!0),class:"btn",style:{"margin-bottom":"5px"}},"Добавить пункт"),(0,i.wy)((0,i._)("input",{class:"addTodo",onKeyup:o[1]||(o[1]=(0,n.D2)(((...t)=>l.addTodo&&l.addTodo(...t)),["enter"])),onBlur:o[2]||(o[2]=t=>d.isShow=!1),"onUpdate:modelValue":o[3]||(o[3]=t=>d.todo=t),type:"text"},null,544),[[n.nr,d.todo],[n.F8,d.isShow]])]),(0,i._)("button",{class:"btn",onClick:o[4]||(o[4]=(...t)=>l.saveEdits&&l.saveEdits(...t)),style:{"margin-left":"5px","margin-bottom":"5px"}},"Сохранить изменения")])),_:1},8,["note"]),(0,i._)("div",et,[(0,i._)("button",{onClick:o[5]||(o[5]=o=>t.$router.push("/")),class:"btn",style:{"margin-top":"15px"}},"Назад к заметкам"),(0,i._)("div",null,[(0,i._)("button",{onClick:o[6]||(o[6]=(...t)=>l.cancelEdit&&l.cancelEdit(...t)),disabled:d.disabled1,class:"btn",style:{"margin-top":"15px","margin-right":"5px"}},"Отменить действия",8,nt),(0,i._)("button",{onClick:o[7]||(o[7]=(...t)=>l.returnEdit&&l.returnEdit(...t)),disabled:d.disabled2,class:"btn",style:{"margin-top":"15px"}},"Вернуть отмененные действия",8,it)])])],64)}var dt=e(6486),lt=e.n(dt),at={components:{noteItem:K},data(){return{note:"",notes:[],activeEdit:"",todo:"",isShow:!1,history:[],click:1,disabled1:!0,disabled2:!0}},created(){this.notes=JSON.parse(localStorage.getItem("notes")),this.note=this.notes.find((t=>t.id==this.$route.params.id)),this.history=[lt().cloneDeep(this.note)]},methods:{editTodo(t){this.activeEdit=t.todo},doneEdit(t){t.todo||(this.note.body=this.note.body.filter((o=>o.id!==t.id))),this.activeEdit="",t.todo=t.todo.trim(),this.historyPush()},changeCheck(t){t.checked,this.historyPush()},addTodo(){const t={id:Date.now(),todo:this.todo,checked:!1};this.note.body.push(t),this.todo="",this.historyPush()},saveEdits(){localStorage.setItem("notes",JSON.stringify(this.notes)),this.history=[]},cancelEdit(){this.click+=1,this.disabled2=!1,this.history.length-this.click>=0&&(this.note=this.history[this.history.length-this.click],this.history.length-this.click===0&&(this.disabled1=!0)),console.log(this.click),console.log(this.history.length-this.click),console.log(this.history.at(-this.click))},returnEdit(){this.click-=1,this.disabled1=!1,this.history.length>this.history.length-this.click&&(this.note=this.history[this.history.length-this.click],console.log(this.click),console.log(this.history.length-this.click),1===this.click&&(this.disabled2=!0))},historyPush(){lt().isEqual(this.note,this.history)||(this.history.push(lt().cloneDeep(this.note)),this.click=1,this.disabled1=!1,this.disabled2=!1,console.log(this.history))}}};const rt=(0,a.Z)(at,[["render",st]]);var ct=rt;const ut=[{path:"/",component:Q},{path:"/:id",component:ct}],ht=(0,u.p7)({history:(0,u.PO)("/App/"),routes:ut});var pt=ht,bt=e(3907),yt=(0,bt.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.ri)(c).use(yt).use(pt).mount("#app")}},o={};function e(n){var i=o[n];if(void 0!==i)return i.exports;var s=o[n]={id:n,loaded:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}e.m=t,function(){var t=[];e.O=function(o,n,i,s){if(!n){var d=1/0;for(c=0;c<t.length;c++){n=t[c][0],i=t[c][1],s=t[c][2];for(var l=!0,a=0;a<n.length;a++)(!1&s||d>=s)&&Object.keys(e.O).every((function(t){return e.O[t](n[a])}))?n.splice(a--,1):(l=!1,s<d&&(d=s));if(l){t.splice(c--,1);var r=i();void 0!==r&&(o=r)}}return o}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,i,s]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){e.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var i,s,d=n[0],l=n[1],a=n[2],r=0;if(d.some((function(o){return 0!==t[o]}))){for(i in l)e.o(l,i)&&(e.m[i]=l[i]);if(a)var c=a(e)}for(o&&o(n);r<d.length;r++)s=d[r],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(c)},n=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(3792)}));n=e.O(n)})();
//# sourceMappingURL=app.5de5d07b.js.map